generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model store_members {
  id               String   @id @db.VarChar(255)
  user_id          String   @db.VarChar(255)
  store_id         String?  @db.Uuid
  is_member_active Boolean  @default(true)
  created_at       DateTime @db.Timestamptz(6)
  stores           stores?  @relation(fields: [store_id], references: [id], onDelete: Cascade, map: "store_id")
  users            users    @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "user_id")
}

model stores {
  id            String          @id @db.Uuid
  name          String          @db.VarChar(255)
  description   String?         @db.VarChar(255)
  is_active     Boolean         @default(true)
  created_at    DateTime        @db.Timestamptz(6)
  owner         String          @db.VarChar(255)
  products      products[]
  store_members store_members[]
  users         users           @relation(fields: [owner], references: [id], onDelete: Cascade, map: "user_id")
}

model users {
  id            String          @id @db.VarChar(255)
  name          String          @db.VarChar(255)
  last_name     String          @db.VarChar(255)
  password      String
  role          String          @db.VarChar(255)
  created_at    DateTime        @db.Timestamptz(6)
  is_active     Boolean?        @default(true)
  icon_url      String?
  username      String          @db.VarChar(255)
  email         String          @unique(map: "email") @db.VarChar(255)
  store_members store_members[]
  stores        stores[]
}

model products {
  id       String     @id @db.VarChar(255)
  barcode  String     @db.VarChar(255)
  name     String     @db.VarChar(255)
  store_id String     @db.Uuid
  stores   stores     @relation(fields: [store_id], references: [id], onDelete: Cascade, map: "store_id")
  w_fichas w_fichas[]
}

model w_fichas {
  id         String   @id @db.Uuid
  condition  String   @db.VarChar(255)
  cost       Decimal  @db.Decimal(10, 2)
  benchmark  Decimal  @db.Decimal(10, 2)
  tax        Boolean
  product_id String   @db.VarChar(255)
  products   products @relation(fields: [product_id], references: [id], onDelete: Cascade, map: "product_id")
}
