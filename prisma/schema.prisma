generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model store_members {
  id               String   @id @db.VarChar(255)
  user_id          String   @db.VarChar(255)
  store_id         String?  @db.Uuid
  is_member_active Boolean  @default(true)
  created_at       DateTime @db.Timestamptz(6)
  stores           stores?  @relation(fields: [store_id], references: [id], onDelete: Cascade, map: "store_id")
  users            users    @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "user_id")
}

model stores {
  id            String          @id @db.Uuid
  name          String          @db.VarChar(255)
  description   String?         @db.VarChar(255)
  is_active     Boolean         @default(true)
  created_at    DateTime        @db.Timestamptz(6)
  owner         String          @db.VarChar(255)
  categories    categories[]
  products      products[]
  providers     providers[]
  store_members store_members[]
  users         users           @relation(fields: [owner], references: [id], onDelete: Cascade, map: "user_id")
}

model users {
  id            String          @id @db.VarChar(255)
  name          String          @db.VarChar(255)
  last_name     String          @db.VarChar(255)
  password      String
  role          String          @db.VarChar(255)
  created_at    DateTime        @db.Timestamptz(6)
  is_active     Boolean?        @default(true)
  icon_url      String?
  username      String          @db.VarChar(255)
  email         String          @unique(map: "email") @db.VarChar(255)
  store_members store_members[]
  stores        stores[]
}

model products {
  id          String     @id @db.VarChar(255)
  barcode     String     @db.VarChar(255)
  name        String     @db.VarChar(255)
  store_id    String     @db.Uuid
  created_at  DateTime   @db.Timestamptz(6)
  provider_id String     @db.VarChar(255)
  category_id String     @db.Uuid
  categories  categories @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: Cascade, map: "category_id")
  providers   providers  @relation(fields: [provider_id], references: [id], onDelete: Cascade, onUpdate: Cascade, map: "provider_id")
  stores      stores     @relation(fields: [store_id], references: [id], onDelete: Cascade, map: "store_id")
  w_ficha     w_fichas?
}

model w_fichas {
  id         String   @id @db.Uuid
  condition  String   @db.VarChar(255)
  cost       Decimal  @db.Decimal(10, 2)
  benchmark  Decimal  @db.Decimal(10, 2)
  tax        Boolean
  product_id String   @unique @db.VarChar(255)
  product    products @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: Cascade, map: "product_id")
}

model categories {
  id         String     @id @db.Uuid
  name       String     @db.VarChar(255)
  created_at DateTime   @db.Timestamptz(6)
  updated_at DateTime   @db.Timestamptz(6)
  store_id   String     @db.Uuid
  stores     stores     @relation(fields: [store_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "store_id")
  products   products[]
}

model providers {
  id            String     @id @db.VarChar(255)
  name          String     @db.VarChar(255)
  description   String?    @db.VarChar(255)
  created_at    DateTime   @db.Timestamptz(6)
  store_id      String     @db.Uuid
  contact_phone String     @default("NO_CONTACT_PHONE") @db.VarChar(255)
  contact_email String     @default("NO_CONTACT_EMAIL") @db.VarChar(255)
  is_active     Boolean?   @default(true)
  products      products[]
  stores        stores     @relation(fields: [store_id], references: [id], onDelete: Cascade, map: "store_id")
}
